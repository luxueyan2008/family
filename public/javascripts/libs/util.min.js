var target="campaign";function in_array(a,b){for(i=0;i<a.length;i++){if(a[i]==b){return true;}}return false;}function GetCookieVal(b){var a=document.cookie.indexOf(";",b);
if(a==-1){a=document.cookie.length;}return unescape(document.cookie.substring(b,a));}function SetCookie(a,e){var d=new Date("June 3, 2999");var g="/";var c=null;
var f=false;var b=a+"="+escape(e)+"; expires="+d.toGMTString()+((g==null)?"":("; path="+g))+((c==null)?"":("; domain="+c))+((f==true)?"; secure":"");document.cookie=b;
}function GetCookie(d){var b=d+"=";var f=b.length;var a=document.cookie.length;var e=0;while(e<a){var c=e+f;if(document.cookie.substring(e,c)==b){return GetCookieVal(c);
}e=document.cookie.indexOf(" ",e)+1;if(e==0){break;}}return null;}function checkSing(c){var b=$("#ids").val().split(",");if(in_array(b,c)){for(var a=0;
a<b.length;a++){if(c==b[a]){b.removeAt(a);}}}else{b.push(c);}$("#ids").val(b.join(","));display();}function display(){var a=$("#ids").val();if(a==""){$(".fl.operate").find("a:not(:last)").attr("class","btn_down");
}else{$(".fl.operate").find("a:not(:last)").attr("class","btn_hover");}}function check(){var a="";if($("#checkedAll").attr("checked")=="checked"){$("input[name='cb']").each(function(){a+=$(this).val()+",";
$(this).attr("checked",true);});}else{$("input[name='cb']").each(function(){$(this).attr("checked",false);});}$("#ids").val(a);display();}function get_ids(){var a="";
$(".tr_pv").each(function(){var b=$(this).attr("id").replace("tr_","");a+=b+",";});return a;}function load_report(a){var a=a;var d=get_ids();var c=$("#dateType").val();
var e=$("#startDate").val();var b=$("#endDate").val();if(d.length>1){get_report(a,d,c,e,b);}}function load_report_statistic(a){var a=a;var c=$("#dateType").val();
var d=$("#startDate").val();var b=$("#endDate").val();clear_statistic();$.ajax({url:"/jsonreport/statistic",contentType:"application/json",cache:false,type:"GET",data:{reportName:a,dateType:c,startTime:d,endTime:b},dataType:"json",success:function(k){var e=k.show;
$("#show_statistic").html(e);var h=k.click;$("#click_statistic").html(h);var f=k.consume;if(f){f=f/1000000;}$("#consume_statistic").html(f);if(e>0){var j=Math.round(h/e*10000)/10000;
$("#ctr_statistic").html(j);}if(h>0){var g=Math.round(f/h*10000)/10000;$("#ppc_statistic").html(g);}},error:function(){$("#info").html("加载pv失败！");$("#info").show();
}});}function get_report(a,d,c,e,b){$.ajax({url:"/jsonreport/report",contentType:"application/json",cache:false,type:"GET",data:{reportName:a,ids:d,dateType:c,startTime:e,endTime:b},dataType:"json",success:function(n){if(n.length>0){var h;
for(var o=0;o<n.length;o++){var m=(n[o]);var h=m.id;var r=m.show;if(r){$("#show_"+h).html(r);}var s=m.click;if(s){$("#click_"+h).html(s);}var f=m.download;
if(f){$("#download_"+h).html(f);}var k=m.consume/1000000;if(k){$("#consume_"+h).html("￥"+k);}var p=m.income/1000000;if(p){$("#income_"+h).html("￥"+p);}if(r>0){if(s>0){var j=Math.round(s/r*10000)/100;
$("#ctr_"+h).html(j+"%");}if(f>0){var l=Math.round(f/r*10000)/100;$("#dtr_"+h).html(l+"%");}if(p){var q=Math.round(p*1000/r*100)/100;$("#cpm_"+h).html("￥"+q);
}}if(s>0){if(k){var g=Math.round(k/s*100)/100;$("#ppc_"+h).html("￥"+g);}}}}else{clear_report();}},error:function(){$("#info").html("加载pv失败！");$("#info").show();
}});}function clear_report(){$(".tr_pv").each(function(){var b=$(this).attr("id").replace("tr_","");var a=b;if($("#in_"+b).val()){a=$("#in_"+b).val();}$("#show_"+a).html("--");
$("#click_"+a).html("--");$("#download_"+a).html("--");$("#consume_"+a).html("--");$("#ctr_"+a).html("--");$("#dtr_"+a).html("--");$("#ppc_"+a).html("--");
$("#income_"+a).html("--");$("#cpm_"+a).html("--");});}function clear_statistic(){$("#show_statistic").html("--");$("#click_statistic").html("--");$("#consume_statistic").html("--");
$("#ctr_statistic").html("--");$("#ppc_statistic").html("--");}function checkNumber(c){var b=/^[0-9]*(\.[0-9]{0,2})?$/;if(!b.exec(c)){return false;}var a=/^[0]*(\.[0]{2})?$/;
if(a.exec(c)){return false;}return true;}function checkNullByName(b,e,c){var d="";for(var a=0;a<b.length;a++){if($.trim($("#"+b[a]).val())==""){d+=e[a]+"不能为空\r\n";
}else{if(c[a]=="1"){if(!checkNumber($("#"+b[a]).val())){d+="请输入正确的"+e[a]+"\r\n";}}}}if(d!=""){alert(d);return false;}return true;}function formatdate(c,a){var e={"M+":c.getMonth()+1,"d+":c.getDate(),"h+":c.getHours()%12==0?12:c.getHours()%12,"H+":c.getHours(),"m+":c.getMinutes(),"s+":c.getSeconds(),"q+":Math.floor((c.getMonth()+3)/3),S:c.getMilliseconds()};
var d={"0":"\u65e5","1":"\u4e00","2":"\u4e8c","3":"\u4e09","4":"\u56db","5":"\u4e94","6":"\u516d"};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(c.getFullYear()+"").substr(4-RegExp.$1.length));
}if(/(E+)/.test(a)){a=a.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"\u661f\u671f":"\u5468"):"")+d[c.getDay()+""]);}for(var b in e){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(e[b]):(("00"+e[b]).substr((""+e[b]).length)));
}}return a;}var patrn=/^[0-9]*(\.[0-9]{0,2})?$/;var zeroFlag=/^[0]*(\.[0]{0,2})?$/;$(function(){$(".not_null").bind("blur",null_bind);$(".number").bind("blur",function(){if(this.value!=""){if(!patrn.test(this.value)||zeroFlag.test(this.value)){$("#"+this.id+"_warning").attr("class","tips_week_warning warning");
$("#"+this.id+"_warning").html("输入类型不正确！");}else{$("#"+this.id+"_warning").attr("class","warning");$("#"+this.id+"_warning").html("");}}});});function null_bind(){if($.trim(this.value)!=""){$("#"+this.id+"_warning").attr("class","warning");
$("#"+this.id+"_warning").html("");}else{$("#"+this.id+"_warning").attr("class","tips_week_warning warning");$("#"+this.id+"_warning").html("不能为空！");}}function checkSubmit(){$(".not_null").each(function(){if($.trim(this.value)!=""){$("#"+this.id+"_warning").attr("class","warning");
$("#"+this.id+"_warning").html("");}else{$("#"+this.id+"_warning").attr("class","tips_week_warning warning");$("#"+this.id+"_warning").html("不能为空！");}});
$(".number").each(function(){if(this.value!=""){if(!patrn.test(this.value)||zeroFlag.test(this.value)){$("#"+this.id+"_warning").attr("class","tips_week_warning warning");
$("#"+this.id+"_warning").html("输入类型不正确！");}else{$("#"+this.id+"_warning").attr("class","warning");$("#"+this.id+"_warning").html("");}}});$(".file_not_null").each(function(){if($.trim(this.value)!=""){$("#"+this.id+"_warning").attr("class","warning");
$("#"+this.id+"_warning").html("");}else{$("#"+this.id+"_warning").attr("class","tips_week_warning warning");$("#"+this.id+"_warning").html("请上传文件！");}});
var a=false;$(".warning").each(function(){if($.trim(this.innerHTML)!=""){a=true;}});if(a){alert("请正确填写相关内容！");return false;}return true;}function showAdgroup(a){$.ajax({url:"/advertiser/campaign/adgroupList",contentType:"application/json",cache:false,type:"GET",data:{campaignId:a},dataType:"json",success:function(e){$("#specifyAdgroup").val("0");
var d=e.length;if(d>0){$("#select_adgroup_imitate").removeClass("disableShow");$("#select_adgroup_imitate").attr("onclick","");var g="";for(var c=0;c<d;
c++){var f=e[c];var b=f.name;if(b.length>7){b=b.substring(0,7)+"..";}g+="<li><a href=\"#\" onclick=\"$('#adgroup_text').html('"+b+"');$('#specifyAdgroup').val('"+f.id+"');\">"+b+"</a></li>";
}$("#adgroupList_show").html(g);}else{$("#select_adgroup_imitate").addClass("disableShow");$("#select_adgroup_imitate").attr("onclick","alert('当前选中的计划下没有广告组！');");
}},error:function(b,d,c){alert("请求失败XMLHttpRequest:"+b);alert("请求失败textStatus:"+d);alert("请求失败errorThrown:"+c);}});}function doDirection(){var a=$("#specifyCampaign").val();
var b=$("#specifyAdgroup").val();if(a=="0"&&b=="0"){alert("请至少选择一个计划！");return;}if(b=="0"){window.location="/advertiser/adgroup/"+a+"/index";return;}window.location="/advertiser/creative/"+b+"/index";
}